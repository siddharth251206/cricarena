{% extends 'quiz/page.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'quiz/style.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<div class="start-container">
  <h1>Welcome to the Cricket Quiz Arena ğŸ</h1>
  <p>Test your cricket knowledge and climb the leaderboard!</p>

  {% if user.is_authenticated %}
  <form id="quizStartForm" method="POST" action="{% url 'start_quiz' %}">
  {% csrf_token %}
  <label for="difficulty">Choose Difficulty:</label>
  <select name="difficulty" id="difficulty" required>
    <option value="" disabled selected>-- Select --</option>
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
  </select>
  <button type="submit" id="startQuizBtn">Start Quiz ğŸš€</button>
</form>
<div class="modal-overlay" id="quizInfoModal" style="display: none;">
  <div class="modal-box">
    <button class="modal-close" onclick="document.getElementById('quizInfoModal').style.display='none'">âœ•</button>
    <h3>Before You Begin</h3>
    <ul>
      <li>All 10 questions must be answered to submit your quiz</li>
      <li>Exclusive achievements unlock based on your final score</li>
      <li>Real-time leaderboard updates track your ranking instantly</li>
      <li>Receive a comprehensive performance analysis upon completion</li>
    </ul>
    <button id="confirmStartBtn">Start Challenge ğŸ</button>
  </div>
</div>

  {% else %}
   <a href="/accounts/?next={% url 'quiz_home' %}" class="btn btn-primary">Login to Start Quiz</a>
  {% endif %}

  <!-- Inside landing.html -->
  <a href="{% url 'poll_list' %}" class="explore-polls-btn">ğŸ—³ï¸ Explore Fan Polls</a>
  <a href="{% url 'leaderboard' %}" class="leaderboard-btn">ğŸ† View Leaderboard</a>

</div>
{% endblock %}
{% block scripts_extra %}
<script>
  const startBtn = document.getElementById('startQuizBtn');
  const modal = document.getElementById('quizInfoModal');
  const confirmBtn = document.getElementById('confirmStartBtn');
  const form = document.getElementById('quizStartForm');

  startBtn.addEventListener('click', function (e) {
    e.preventDefault();
    const difficulty = document.getElementById('difficulty').value;
    if (!difficulty) {
      alert("Please select a difficulty level first!");
      return;
    }
    modal.style.display = 'flex';
  });

  confirmBtn.addEventListener('click', function () {
    modal.style.display = 'none';
    form.submit();
  });
</script>
{% endblock %}