{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login / Signup - CricArena</title>
  <link rel="stylesheet" href="{% static 'accounts/css/login.css' %}">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <a href="/home/" class="back-home">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 20L0 10L10 0L11.775 1.775L3.55 10L11.775 18.225L10 20Z" fill="#19e86c"/>
      </svg>
      Back to Home
    </a>
    
    {% if show_signup %}
      <div id="signup-form" class="form active">
        <div class="header-group">
          <h2><img src="/static/ipl/assets/cricarenalogo.png" alt="">CRICARENA</h2>
          <p class="subheading">Sign up to create a new account</p>
        </div>

        {% if signup_form.errors %}
          <div class="error-messages">
            <ul>
              {% for field in signup_form %}
                {% for error in field.errors %}
                  <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                {% endfor %}
              {% endfor %}
              {% for error in signup_form.non_field_errors %}
                <li>{{ error }}</li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}

        <form method="post">
          {% csrf_token %}
          <label for="id_username">Username</label>
          {{ signup_form.username }}

          <label for="id_nickname">Nickname</label>
          {{ signup_form.nickname }}

          <label for="id_email">Email</label>
          {{ signup_form.email }}

          <label for="id_password1">Password</label>
          {{ signup_form.password1 }}
          {% if signup_form.password1.help_text %}
            <small class="hint">{{ signup_form.password1.help_text }}</small>
          {% endif %}

          <label for="id_password2">Confirm Password</label>
          {{ signup_form.password2 }}

          <label>Favorite IPL Team:</label>
          <div class="card-radio-group">
            {% for radio in signup_form.fav_ipl_team %}
              <label class="card-radio-label">{{ radio.tag }}<span>{{ radio.choice_label }}</span></label>
            {% endfor %}
          </div>

          <button type="submit" name="signup">Sign Up</button>
        </form>
        <p class="toggle-text">Already registered? <a href="?login=1" class="toggle">Login</a></p>
      </div>

    {% else %}
      <div id="login-form" class="form active">
        <div class="header-group">
          <h2><img src="/static/ipl/assets/cricarenalogo.png" alt="">CRICARENA</h2>
          <p class="subheading">Log in to your account</p>
        </div>

        {% if messages %}
          <div class="error-messages">
            {% for message in messages %}
              <p>{{ message }}</p>
            {% endfor %}
          </div>
        {% endif %}

        <form method="post">
          {% csrf_token %}
          <label for="id_username">Username</label>
          {{ form.username }}

          <label for="id_password">Password</label>
          {{ form.password }}

          <button type="submit" name="login">Login</button>
        </form>
        <p class="toggle-text">Not a user? <a href="?signup=1" class="toggle">Sign up</a></p>
      </div>
    {% endif %}
  </div>

  {% if nickname %}
  <div class="welcome-toast" id="welcomeToast">
    ðŸ‘‹ Welcome, <strong>{{ nickname }}</strong>!
  </div>
  <script>
    setTimeout(() => {
      document.getElementById("welcomeToast").classList.add("show");
      setTimeout(() => {
        document.getElementById("welcomeToast").classList.remove("show");
      }, 4000);
    }, 500);
  </script>
  {% endif %}
</body>
</html>
